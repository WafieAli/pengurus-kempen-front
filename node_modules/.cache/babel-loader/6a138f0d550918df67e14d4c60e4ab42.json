{"remainingRequest":"/Users/srmyit/Projects/master/campaign-manager-frontend/node_modules/babel-loader/lib/index.js!/Users/srmyit/Projects/master/campaign-manager-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/srmyit/Projects/master/campaign-manager-frontend/src/modules/auth.module.js","dependencies":[{"path":"/Users/srmyit/Projects/master/campaign-manager-frontend/src/modules/auth.module.js","mtime":1616693397437},{"path":"/Users/srmyit/Projects/master/campaign-manager-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/srmyit/Projects/master/campaign-manager-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/srmyit/Projects/master/campaign-manager-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvc3JteWl0L1Byb2plY3RzL21hc3Rlci9jYW1wYWlnbi1tYW5hZ2VyLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvc3JteWl0L1Byb2plY3RzL21hc3Rlci9jYW1wYWlnbi1tYW5hZ2VyLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgQVBJX1VSTCwgYXV0aEhlYWRlciwgdXNlclN0YXRlIH0gZnJvbSAiLi9oZWxwZXIubW9kdWxlLmpzIjsKCnZhciBBdXRoU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQXV0aFNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aFNlcnZpY2UpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEF1dGhTZXJ2aWNlLCBbewogICAga2V5OiAiY2xlYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICBheGlvcy5nZXQoQVBJX1VSTCArICcvYXV0aC9jbGVhcicsIHsKICAgICAgICBoZWFkZXJzOiBhdXRoSGVhZGVyKCkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICdvaycpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbih1c2VyKSB7CiAgICAgIHJldHVybiBheGlvcy5wb3N0KEFQSV9VUkwgKyAnL2F1dGgvbG9naW4nLCB7CiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbikgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7IC8vdGhpcyBpcyB3aHkgdGhlIHJvb3Qgb2YgeW91ciBsb2NhbCBzdG9yYWdlIGlzIGNhbGxlcyAidXNlciIuCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyKHVzZXIpIHsKICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoQVBJX1VSTCArICcvYXV0aC9yZWdpc3RlcicsIHsKICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSwKICAgICAgICByb2xlOiB1c2VyLnJvbGUsCiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXV0aFNlcnZpY2U7Cn0oKTsKCmV4cG9ydCB2YXIgYXV0aG9yaXplID0gbmV3IEF1dGhTZXJ2aWNlKCk7CmV4cG9ydCB2YXIgYXV0aCA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB1c2VyU3RhdGUoKSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBhdXRob3JpemUubG9naW4odXNlcikudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgICAgIGNvbW1pdCgnbG9naW5TdWNjZXNzJywgdXNlcik7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1c2VyKTsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29tbWl0KCdsb2dpbkZhaWx1cmUnKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICBhdXRob3JpemUubG9nb3V0KCk7CiAgICAgIGNvbW1pdCgnbG9nb3V0Jyk7CiAgICB9LAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF9yZWYzLCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIHJldHVybiBhdXRob3JpemUucmVnaXN0ZXIodXNlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb21taXQoJ3JlZ2lzdGVyU3VjY2VzcycpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgncmVnaXN0ZXJGYWlsdXJlJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGxvZ2luU3VjY2VzczogZnVuY3Rpb24gbG9naW5TdWNjZXNzKHN0YXRlLCB1c2VyKSB7CiAgICAgIHN0YXRlLnN0YXR1cy5sb2dnZWRJbiA9IHRydWU7CiAgICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogICAgfSwKICAgIGxvZ2luRmFpbHVyZTogZnVuY3Rpb24gbG9naW5GYWlsdXJlKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cy5sb2dnZWRJbiA9IGZhbHNlOwogICAgICBzdGF0ZS51c2VyID0gbnVsbDsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMubG9nZ2VkSW4gPSBmYWxzZTsKICAgICAgc3RhdGUudXNlciA9IG51bGw7CiAgICB9LAogICAgcmVnaXN0ZXJTdWNjZXNzOiBmdW5jdGlvbiByZWdpc3RlclN1Y2Nlc3Moc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gZmFsc2U7CiAgICB9LAogICAgcmVnaXN0ZXJGYWlsdXJlOiBmdW5jdGlvbiByZWdpc3RlckZhaWx1cmUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/srmyit/Projects/master/campaign-manager-frontend/src/modules/auth.module.js"],"names":["axios","API_URL","authHeader","userState","AuthService","get","headers","then","response","data","message","localStorage","removeItem","location","reload","user","post","username","password","accessToken","setItem","JSON","stringify","role","email","authorize","auth","namespaced","state","actions","login","commit","Promise","resolve","error","reject","logout","register","mutations","loginSuccess","status","loggedIn","loginFailure","registerSuccess","registerFailure"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {API_URL, authHeader, userState} from './helper.module.js'\n\nclass AuthService {\n  \n  clear(){\n    axios.get(API_URL + '/auth/clear', { headers: authHeader() }).then(response => {\n      if(response.data.message == 'ok')\n      {\n        localStorage.removeItem('user');\n        location.reload();\n      }\n    });\n  }\n\n  login(user) {\n    return axios\n      .post(API_URL + '/auth/login', {\n        username: user.username,\n        password: user.password\n      })\n      .then(response => {\n        if (response.data.accessToken) {\n          localStorage.setItem('user', JSON.stringify(response.data)); //this is why the root of your local storage is calles \"user\".\n        }\n        return response.data;\n      });\n  }\n\n  logout() {\n    localStorage.removeItem('user');\n  }\n\n  register(user) {\n    return axios.post(API_URL + '/auth/register', {\n      username: user.username,\n      role: user.role,\n      email: user.email,\n      password: user.password\n    });\n  }\n}\n\nexport var authorize = new AuthService();\n\nexport const auth = {\n  namespaced: true,\n  state: userState(),\n  actions: {\n    login({ commit }, user) { \n      return authorize.login(user).then(\n        user => {\n          commit('loginSuccess', user); \n          return Promise.resolve(user); \n        },\n        error => {\n          commit('loginFailure');\n          return Promise.reject(error);\n        }\n      );\n    },\n    logout({ commit }) {\n      authorize.logout();\n      commit('logout');\n    },\n    register({ commit }, user) {\n      return authorize.register(user).then(\n        response => {\n          commit('registerSuccess');\n          return Promise.resolve(response.data);\n        },\n        error => {\n          commit('registerFailure');\n          return Promise.reject(error);\n        }\n      );\n    },\n  },\n  mutations: {\n    loginSuccess(state, user) {\n      state.status.loggedIn = true;\n      state.user = user;\n    },\n    loginFailure(state) {\n      state.status.loggedIn = false;\n      state.user = null;\n    },\n    logout(state) {\n      state.status.loggedIn = false;\n      state.user = null;\n    },\n    registerSuccess(state) {\n      state.status.loggedIn = false;\n    },\n    registerFailure(state) {\n      state.status.loggedIn = false;\n    }\n  }\n};\n"]}]}